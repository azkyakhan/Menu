import{__awaiter,__generator,__spreadArray}from"tslib";
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */import{r as registerInstance,e as createEvent,c as writeTask,h,H as Host,i as getElement}from"./index-06cd27b1.js";import{b as getIonMode,c as config}from"./ionic-global-a049bcbf.js";import{C as CoreDelegate,a as attachComponent,d as detachComponent}from"./framework-delegate-0e9f0224.js";import{k as clamp,g as getElementRoot,r as raf}from"./helpers-6e1e5b65.js";import{KEYBOARD_DID_OPEN}from"./keyboard-808e4e15.js";import{B as BACKDROP,e as prepareOverlay,d as present,h as activeAnimations,f as dismiss,g as eventMethod}from"./overlays-89ee00ba.js";import{g as getClassMap}from"./theme-a24ff1ad.js";import{e as deepReady}from"./index-4a9ebc6d.js";import{c as createAnimation}from"./animation-19dbf9bf.js";import{g as getTimeGivenProgression}from"./cubic-bezier-154a53a5.js";import{createGesture}from"./index-41bf41f2.js";import"./hardware-back-button-ace6a71b.js";import"./gesture-controller-68c023a4.js";var SwipeToCloseDefaults={MIN_PRESENTING_SCALE:.93};var createSwipeToCloseGesture=function(e,t,r){var a=e.offsetHeight;var i=false;var o=function(e){var t=e.event.target;if(t===null||!t.closest){return true}var r=t.closest("ion-content, ion-footer");if(r===null){return true}return false};var n=function(){t.progressStart(true,i?1:0)};var s=function(e){var r=clamp(1e-4,e.deltaY/a,.9999);t.progressStep(r)};var d=function(e){var o=e.velocityY;var n=clamp(1e-4,e.deltaY/a,.9999);var s=(e.deltaY+o*1e3)/a;var d=s>=.5;var p=d?-.001:.001;if(!d){t.easing("cubic-bezier(1, 0, 0.68, 0.28)");p+=getTimeGivenProgression([0,0],[1,0],[.68,.28],[1,1],n)[0]}else{t.easing("cubic-bezier(0.32, 0.72, 0, 1)");p+=getTimeGivenProgression([0,0],[.32,.72],[0,1],[1,1],n)[0]}var c=d?computeDuration(n*a,o):computeDuration((1-n)*a,o);i=d;l.enable(false);t.onFinish((function(){if(!d){l.enable(true)}})).progressEnd(d?1:0,p,c);if(d){r()}};var l=createGesture({el:e,gestureName:"modalSwipeToClose",gesturePriority:40,direction:"y",threshold:10,canStart:o,onStart:n,onMove:s,onEnd:d});return l};var computeDuration=function(e,t){return clamp(400,e/Math.abs(t*1.1),500)};var getBackdropValueForSheet=function(e,t){var r=1/(1-t);var a=-(t*r);return e*r+a};var createSheetEnterAnimation=function(e){var t=e.currentBreakpoint,r=e.backdropBreakpoint;var a=r===undefined||r<t;var i=a?"calc(var(--backdrop-opacity) * "+t+")":"0";var o=createAnimation("backdropAnimation").fromTo("opacity",0,i);if(a){o.beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"])}var n=createAnimation("wrapperAnimation").keyframes([{offset:0,opacity:1,transform:"translateY(100%)"},{offset:1,opacity:1,transform:"translateY("+(100-t*100)+"%)"}]);return{wrapperAnimation:n,backdropAnimation:o}};var createSheetLeaveAnimation=function(e){var t=e.currentBreakpoint,r=e.backdropBreakpoint;var a="calc(var(--backdrop-opacity) * "+getBackdropValueForSheet(t,r)+")";var i=[{offset:0,opacity:a},{offset:1,opacity:0}];var o=[{offset:0,opacity:a},{offset:r,opacity:0},{offset:1,opacity:0}];var n=createAnimation("backdropAnimation").keyframes(r!==0?o:i);var s=createAnimation("wrapperAnimation").keyframes([{offset:0,opacity:1,transform:"translateY("+(100-t*100)+"%)"},{offset:1,opacity:1,transform:"translateY(100%)"}]);return{wrapperAnimation:s,backdropAnimation:n}};var createEnterAnimation$1=function(){var e=createAnimation().fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]);var t=createAnimation().fromTo("transform","translateY(100vh)","translateY(0vh)");return{backdropAnimation:e,wrapperAnimation:t}};var iosEnterAnimation=function(e,t){var r=t.presentingEl,a=t.currentBreakpoint;var i=getElementRoot(e);var o=a!==undefined?createSheetEnterAnimation(t):createEnterAnimation$1(),n=o.wrapperAnimation,s=o.backdropAnimation;s.addElement(i.querySelector("ion-backdrop"));n.addElement(i.querySelectorAll(".modal-wrapper, .modal-shadow")).beforeStyles({opacity:1});var d=createAnimation("entering-base").addElement(e).easing("cubic-bezier(0.32,0.72,0,1)").duration(500).addAnimation(n);if(r){var l=window.innerWidth<768;var p=r.tagName==="ION-MODAL"&&r.presentingElement!==undefined;var c=getElementRoot(r);var m=createAnimation().beforeStyles({transform:"translateY(0)","transform-origin":"top center",overflow:"hidden"});var h=document.body;if(l){var f=!CSS.supports("width","max(0px, 1px)")?"30px":"max(30px, var(--ion-safe-area-top))";var u=p?"-10px":f;var v=SwipeToCloseDefaults.MIN_PRESENTING_SCALE;var b="translateY("+u+") scale("+v+")";m.afterStyles({transform:b}).beforeAddWrite((function(){return h.style.setProperty("background-color","black")})).addElement(r).keyframes([{offset:0,filter:"contrast(1)",transform:"translateY(0px) scale(1)",borderRadius:"0px"},{offset:1,filter:"contrast(0.85)",transform:b,borderRadius:"10px 10px 0 0"}]);d.addAnimation(m)}else{d.addAnimation(s);if(!p){n.fromTo("opacity","0","1")}else{var v=p?SwipeToCloseDefaults.MIN_PRESENTING_SCALE:1;var b="translateY(-10px) scale("+v+")";m.afterStyles({transform:b}).addElement(c.querySelector(".modal-wrapper")).keyframes([{offset:0,filter:"contrast(1)",transform:"translateY(0) scale(1)"},{offset:1,filter:"contrast(0.85)",transform:b}]);var g=createAnimation().afterStyles({transform:b}).addElement(c.querySelector(".modal-shadow")).keyframes([{offset:0,opacity:"1",transform:"translateY(0) scale(1)"},{offset:1,opacity:"0",transform:b}]);d.addAnimation([m,g])}}}else{d.addAnimation(s)}return d};var createLeaveAnimation$1=function(){var e=createAnimation().fromTo("opacity","var(--backdrop-opacity)",0);var t=createAnimation().fromTo("transform","translateY(0vh)","translateY(100vh)");return{backdropAnimation:e,wrapperAnimation:t}};var iosLeaveAnimation=function(e,t,r){if(r===void 0){r=500}var a=t.presentingEl,i=t.currentBreakpoint;var o=getElementRoot(e);var n=i!==undefined?createSheetLeaveAnimation(t):createLeaveAnimation$1(),s=n.wrapperAnimation,d=n.backdropAnimation;d.addElement(o.querySelector("ion-backdrop"));s.addElement(o.querySelectorAll(".modal-wrapper, .modal-shadow")).beforeStyles({opacity:1});var l=createAnimation("leaving-base").addElement(e).easing("cubic-bezier(0.32,0.72,0,1)").duration(r).addAnimation(s);if(a){var p=window.innerWidth<768;var c=a.tagName==="ION-MODAL"&&a.presentingElement!==undefined;var m=getElementRoot(a);var h=createAnimation().beforeClearStyles(["transform"]).afterClearStyles(["transform"]).onFinish((function(e){if(e!==1){return}a.style.setProperty("overflow","");var t=Array.from(f.querySelectorAll("ion-modal")).filter((function(e){return e.presentingElement!==undefined})).length;if(t<=1){f.style.setProperty("background-color","")}}));var f=document.body;if(p){var u=!CSS.supports("width","max(0px, 1px)")?"30px":"max(30px, var(--ion-safe-area-top))";var v=c?"-10px":u;var b=SwipeToCloseDefaults.MIN_PRESENTING_SCALE;var g="translateY("+v+") scale("+b+")";h.addElement(a).keyframes([{offset:0,filter:"contrast(0.85)",transform:g,borderRadius:"10px 10px 0 0"},{offset:1,filter:"contrast(1)",transform:"translateY(0px) scale(1)",borderRadius:"0px"}]);l.addAnimation(h)}else{l.addAnimation(d);if(!c){s.fromTo("opacity","1","0")}else{var b=c?SwipeToCloseDefaults.MIN_PRESENTING_SCALE:1;var g="translateY(-10px) scale("+b+")";h.addElement(m.querySelector(".modal-wrapper")).afterStyles({transform:"translate3d(0, 0, 0)"}).keyframes([{offset:0,filter:"contrast(0.85)",transform:g},{offset:1,filter:"contrast(1)",transform:"translateY(0) scale(1)"}]);var w=createAnimation().addElement(m.querySelector(".modal-shadow")).afterStyles({transform:"translateY(0) scale(1)"}).keyframes([{offset:0,opacity:"0",transform:g},{offset:1,opacity:"1",transform:"translateY(0) scale(1)"}]);l.addAnimation([h,w])}}}else{l.addAnimation(d)}return l};var createEnterAnimation=function(){var e=createAnimation().fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]);var t=createAnimation().keyframes([{offset:0,opacity:.01,transform:"translateY(40px)"},{offset:1,opacity:1,transform:"translateY(0px)"}]);return{backdropAnimation:e,wrapperAnimation:t}};var mdEnterAnimation=function(e,t){var r=t.currentBreakpoint;var a=getElementRoot(e);var i=r!==undefined?createSheetEnterAnimation(t):createEnterAnimation(),o=i.wrapperAnimation,n=i.backdropAnimation;n.addElement(a.querySelector("ion-backdrop"));o.addElement(a.querySelector(".modal-wrapper"));return createAnimation().addElement(e).easing("cubic-bezier(0.36,0.66,0.04,1)").duration(280).addAnimation([n,o])};var createLeaveAnimation=function(){var e=createAnimation().fromTo("opacity","var(--backdrop-opacity)",0);var t=createAnimation().keyframes([{offset:0,opacity:.99,transform:"translateY(0px)"},{offset:1,opacity:0,transform:"translateY(40px)"}]);return{backdropAnimation:e,wrapperAnimation:t}};var mdLeaveAnimation=function(e,t){var r=t.currentBreakpoint;var a=getElementRoot(e);var i=r!==undefined?createSheetLeaveAnimation(t):createLeaveAnimation(),o=i.wrapperAnimation,n=i.backdropAnimation;n.addElement(a.querySelector("ion-backdrop"));o.addElement(a.querySelector(".modal-wrapper"));return createAnimation().easing("cubic-bezier(0.47,0,0.745,0.715)").duration(200).addAnimation([n,o])};var createSheetGesture=function(e,t,r,a,i,o,n,s,d){if(n===void 0){n=[]}var l=[{offset:0,opacity:"var(--backdrop-opacity)"},{offset:1,opacity:.01}];var p=[{offset:0,opacity:"var(--backdrop-opacity)"},{offset:1-i,opacity:0},{offset:1,opacity:0}];var c={WRAPPER_KEYFRAMES:[{offset:0,transform:"translateY(0%)"},{offset:1,transform:"translateY(100%)"}],BACKDROP_KEYFRAMES:i!==0?p:l};var m=e.querySelector("ion-content");var h=r.clientHeight;var f=a;var u=0;var v=o.childAnimations.find((function(e){return e.id==="wrapperAnimation"}));var b=o.childAnimations.find((function(e){return e.id==="backdropAnimation"}));var g=n[n.length-1];if(v&&b){v.keyframes(__spreadArray([],c.WRAPPER_KEYFRAMES));b.keyframes(__spreadArray([],c.BACKDROP_KEYFRAMES));o.progressStart(true,1-f);var w=f>i;e.style.setProperty("pointer-events",w?"auto":"none");t.style.setProperty("pointer-events",w?"auto":"none")}if(m&&f!==g){m.scrollY=false}var y=function(e){var t=e.event.target.closest("ion-content");if(f===1&&t){return false}return true};var k=function(){if(m){m.scrollY=false}raf((function(){e.focus()}));o.progressStart(true,1-f)};var x=function(e){var t=1-f;u=clamp(1e-4,t+e.deltaY/h,.9999);o.progressStep(u)};var A=function(r){var a=r.velocityY;var l=(r.deltaY+a*100)/h;var p=f-l;var g=n.reduce((function(e,t){return Math.abs(t-p)<Math.abs(e-p)?t:e}));var w=g!==0;f=0;if(v&&b){v.keyframes([{offset:0,transform:"translateY("+u*100+"%)"},{offset:1,transform:"translateY("+(1-g)*100+"%)"}]);b.keyframes([{offset:0,opacity:"calc(var(--backdrop-opacity) * "+getBackdropValueForSheet(1-u,i)+")"},{offset:1,opacity:"calc(var(--backdrop-opacity) * "+getBackdropValueForSheet(g,i)+")"}]);o.progressStep(0)}E.enable(false);o.onFinish((function(){if(w){if(v&&b){raf((function(){v.keyframes(__spreadArray([],c.WRAPPER_KEYFRAMES));b.keyframes(__spreadArray([],c.BACKDROP_KEYFRAMES));o.progressStart(true,1-g);f=g;d(f);if(m&&f===n[n.length-1]){m.scrollY=true}var r=f>i;e.style.setProperty("pointer-events",r?"auto":"none");t.style.setProperty("pointer-events",r?"auto":"none");E.enable(true)}))}else{E.enable(true)}}}),{oneTimeCallback:true}).progressEnd(1,0,500);if(!w){s()}};var E=createGesture({el:r,gestureName:"modalSheet",gesturePriority:40,direction:"y",threshold:10,canStart:y,onStart:k,onMove:x,onEnd:A});return E};var modalIosCss=":host{--width:100%;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--overflow:hidden;--border-radius:0;--border-width:0;--border-style:none;--border-color:transparent;--background:var(--ion-background-color, #fff);--box-shadow:none;--backdrop-opacity:0;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;contain:strict}.modal-wrapper,ion-backdrop{pointer-events:auto}:host(.overlay-hidden){display:none}.modal-wrapper,.modal-shadow{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:var(--overflow);z-index:10}.modal-shadow{position:absolute;background:transparent}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--width:600px;--height:500px;--ion-safe-area-top:0px;--ion-safe-area-bottom:0px;--ion-safe-area-right:0px;--ion-safe-area-left:0px}}@media only screen and (min-width: 768px) and (min-height: 768px){:host{--width:600px;--height:600px}}.modal-handle{left:0px;right:0px;top:5px;border-radius:8px;margin-left:auto;margin-right:auto;position:absolute;width:36px;height:5px;-webkit-transform:translateZ(0);transform:translateZ(0);background:var(--ion-color-step-350, #c0c0be);z-index:11}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.modal-handle{margin-left:unset;margin-right:unset;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto}}:host(.modal-sheet){--height:calc(100% - (var(--ion-safe-area-top) + 10px))}:host(.modal-sheet) .modal-wrapper,:host(.modal-sheet) .modal-shadow{position:absolute;bottom:0}:host{--backdrop-opacity:var(--ion-backdrop-opacity, 0.4)}:host(.modal-card),:host(.modal-sheet){--border-radius:10px}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--border-radius:10px}}.modal-wrapper{-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0)}@media screen and (max-width: 767px){@supports (width: max(0px, 1px)){:host(.modal-card){--height:calc(100% - max(30px, var(--ion-safe-area-top)) - 10px)}}@supports not (width: max(0px, 1px)){:host(.modal-card){--height:calc(100% - 40px)}}:host(.modal-card) .modal-wrapper{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}:host-context([dir=rtl]):host(.modal-card) .modal-wrapper,:host-context([dir=rtl]).modal-card .modal-wrapper{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}:host(.modal-card){--backdrop-opacity:0;--width:100%;-ms-flex-align:end;align-items:flex-end}:host(.modal-card) .modal-shadow{display:none}:host(.modal-card) ion-backdrop{pointer-events:none}}@media screen and (min-width: 768px){:host(.modal-card){--width:calc(100% - 120px);--height:calc(100% - (120px + var(--ion-safe-area-top) + var(--ion-safe-area-bottom)));--max-width:720px;--max-height:1000px;--backdrop-opacity:0;--box-shadow:0px 0px 30px 10px rgba(0, 0, 0, 0.1);-webkit-transition:all 0.5s ease-in-out;transition:all 0.5s ease-in-out}:host(.modal-card) .modal-wrapper{-webkit-box-shadow:none;box-shadow:none}:host(.modal-card) .modal-shadow{-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow)}}:host(.modal-sheet) .modal-wrapper{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}:host-context([dir=rtl]):host(.modal-sheet) .modal-wrapper,:host-context([dir=rtl]).modal-sheet .modal-wrapper{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}";var modalMdCss=":host{--width:100%;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--overflow:hidden;--border-radius:0;--border-width:0;--border-style:none;--border-color:transparent;--background:var(--ion-background-color, #fff);--box-shadow:none;--backdrop-opacity:0;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;contain:strict}.modal-wrapper,ion-backdrop{pointer-events:auto}:host(.overlay-hidden){display:none}.modal-wrapper,.modal-shadow{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:var(--overflow);z-index:10}.modal-shadow{position:absolute;background:transparent}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--width:600px;--height:500px;--ion-safe-area-top:0px;--ion-safe-area-bottom:0px;--ion-safe-area-right:0px;--ion-safe-area-left:0px}}@media only screen and (min-width: 768px) and (min-height: 768px){:host{--width:600px;--height:600px}}.modal-handle{left:0px;right:0px;top:5px;border-radius:8px;margin-left:auto;margin-right:auto;position:absolute;width:36px;height:5px;-webkit-transform:translateZ(0);transform:translateZ(0);background:var(--ion-color-step-350, #c0c0be);z-index:11}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.modal-handle{margin-left:unset;margin-right:unset;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto}}:host(.modal-sheet){--height:calc(100% - (var(--ion-safe-area-top) + 10px))}:host(.modal-sheet) .modal-wrapper,:host(.modal-sheet) .modal-shadow{position:absolute;bottom:0}:host{--backdrop-opacity:var(--ion-backdrop-opacity, 0.32)}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--border-radius:2px;--box-shadow:0 28px 48px rgba(0, 0, 0, 0.4)}}.modal-wrapper{-webkit-transform:translate3d(0,  40px,  0);transform:translate3d(0,  40px,  0);opacity:0.01}";var Modal=function(){function e(e){var t=this;registerInstance(this,e);this.didPresent=createEvent(this,"ionModalDidPresent",7);this.willPresent=createEvent(this,"ionModalWillPresent",7);this.willDismiss=createEvent(this,"ionModalWillDismiss",7);this.didDismiss=createEvent(this,"ionModalDidDismiss",7);this.didPresentShorthand=createEvent(this,"didPresent",7);this.willPresentShorthand=createEvent(this,"willPresent",7);this.willDismissShorthand=createEvent(this,"willDismiss",7);this.didDismissShorthand=createEvent(this,"didDismiss",7);this.modalIndex=modalIds++;this.coreDelegate=CoreDelegate();this.isSheetModal=false;this.inline=false;this.gestureAnimationDismissing=false;this.presented=false;this.hasController=false;this.keyboardClose=true;this.backdropBreakpoint=0;this.backdropDismiss=true;this.showBackdrop=true;this.animated=true;this.swipeToClose=false;this.isOpen=false;this.configureTriggerInteraction=function(){var e=t,r=e.trigger,a=e.el,i=e.destroyTriggerInteraction;if(i){i()}var o=r!==undefined?document.getElementById(r):null;if(!o){return}var n=function(e,t){var r=function(){t.present()};e.addEventListener("click",r);return function(){e.removeEventListener("click",r)}};t.destroyTriggerInteraction=n(o,a)};this.onBackdropTap=function(){t.dismiss(undefined,BACKDROP)};this.onDismiss=function(e){e.stopPropagation();e.preventDefault();t.dismiss()};this.onLifecycle=function(e){var r=t.usersElement;var a=LIFECYCLE_MAP[e.type];if(r&&a){var i=new CustomEvent(a,{bubbles:false,cancelable:false,detail:e.detail});r.dispatchEvent(i)}}}e.prototype.onIsOpenChange=function(e,t){if(e===true&&t===false){this.present()}else if(e===false&&t===true){this.dismiss()}};e.prototype.onTriggerChange=function(){this.configureTriggerInteraction()};e.prototype.swipeToCloseChanged=function(e){if(this.gesture){this.gesture.enable(e)}else if(e){this.initSwipeToClose()}};e.prototype.connectedCallback=function(){prepareOverlay(this.el)};e.prototype.componentWillLoad=function(){var e=this,t=e.breakpoints,r=e.initialBreakpoint;this.modalId=this.el.hasAttribute("id")?this.el.getAttribute("id"):"ion-modal-"+this.modalIndex;this.isSheetModal=t!==undefined&&r!==undefined;if(t!==undefined&&r!==undefined&&!t.includes(r)){console.warn("[Ionic Warning]: Your breakpoints array must include the initialBreakpoint value.")}};e.prototype.componentDidLoad=function(){var e=this;if(this.isOpen===true){raf((function(){return e.present()}))}this.configureTriggerInteraction()};e.prototype.getDelegate=function(e){if(e===void 0){e=false}if(this.workingDelegate&&!e){return{delegate:this.workingDelegate,inline:this.inline}}var t=this.el.parentNode;var r=this.inline=t!==null&&!this.hasController;var a=this.workingDelegate=r?this.delegate||this.coreDelegate:this.delegate;return{inline:r,delegate:a}};e.prototype.present=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,r,a,i;var o=this;return __generator(this,(function(n){switch(n.label){case 0:if(this.presented){return[2]}if(!(this.currentTransition!==undefined))return[3,2];return[4,this.currentTransition];case 1:n.sent();n.label=2;case 2:e=Object.assign(Object.assign({},this.componentProps),{modal:this.el});t=this.getDelegate(true),r=t.inline,a=t.delegate;i=this;return[4,attachComponent(a,this.el,this.component,["ion-page"],e,r)];case 3:i.usersElement=n.sent();return[4,deepReady(this.usersElement)];case 4:n.sent();writeTask((function(){return o.el.classList.add("show-modal")}));this.currentTransition=present(this,"modalEnter",iosEnterAnimation,mdEnterAnimation,{presentingEl:this.presentingElement,currentBreakpoint:this.initialBreakpoint,backdropBreakpoint:this.backdropBreakpoint});return[4,this.currentTransition];case 5:n.sent();if(this.isSheetModal){this.initSheetGesture()}else if(this.swipeToClose){this.initSwipeToClose()}if(typeof window!=="undefined"){this.keyboardOpenCallback=function(){if(o.gesture){o.gesture.enable(false);raf((function(){if(o.gesture){o.gesture.enable(true)}}))}};window.addEventListener(KEYBOARD_DID_OPEN,this.keyboardOpenCallback)}this.currentTransition=undefined;return[2]}}))}))};e.prototype.initSwipeToClose=function(){var e=this;if(getIonMode(this)!=="ios"){return}var t=this.leaveAnimation||config.get("modalLeave",iosLeaveAnimation);var r=this.animation=t(this.el,{presentingEl:this.presentingElement});this.gesture=createSwipeToCloseGesture(this.el,r,(function(){e.gestureAnimationDismissing=true;e.animation.onFinish((function(){return __awaiter(e,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:return[4,this.dismiss(undefined,"gesture")];case 1:e.sent();this.gestureAnimationDismissing=false;return[2]}}))}))}))}));this.gesture.enable(true)};e.prototype.initSheetGesture=function(){var e=this;var t;var r=this,a=r.wrapperEl,i=r.initialBreakpoint,o=r.backdropBreakpoint;if(!a||i===undefined){return}var n=this.enterAnimation||config.get("modalEnter",iosEnterAnimation);var s=this.animation=n(this.el,{presentingEl:this.presentingElement,currentBreakpoint:i,backdropBreakpoint:o});s.progressStart(true,1);var d=((t=this.breakpoints)===null||t===void 0?void 0:t.sort((function(e,t){return e-t})))||[];this.gesture=createSheetGesture(this.el,this.backdropEl,a,i,o,s,d,(function(){e.gestureAnimationDismissing=true;e.animation.onFinish((function(){return __awaiter(e,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:return[4,this.dismiss(undefined,"gesture")];case 1:e.sent();this.gestureAnimationDismissing=false;return[2]}}))}))}))}),(function(t){e.currentBreakpoint=t}));this.gesture.enable(true)};e.prototype.dismiss=function(e,t){return __awaiter(this,void 0,void 0,(function(){var r,a,i;return __generator(this,(function(o){switch(o.label){case 0:if(this.gestureAnimationDismissing&&t!=="gesture"){return[2,false]}if(typeof window!=="undefined"&&this.keyboardOpenCallback){window.removeEventListener(KEYBOARD_DID_OPEN,this.keyboardOpenCallback)}if(!(this.currentTransition!==undefined))return[3,2];return[4,this.currentTransition];case 1:o.sent();o.label=2;case 2:r=activeAnimations.get(this)||[];this.currentTransition=dismiss(this,e,t,"modalLeave",iosLeaveAnimation,mdLeaveAnimation,{presentingEl:this.presentingElement,currentBreakpoint:this.currentBreakpoint||this.initialBreakpoint,backdropBreakpoint:this.backdropBreakpoint});return[4,this.currentTransition];case 3:a=o.sent();if(!a)return[3,5];i=this.getDelegate().delegate;return[4,detachComponent(i,this.usersElement)];case 4:o.sent();if(this.animation){this.animation.destroy()}if(this.gesture){this.gesture.destroy()}r.forEach((function(e){return e.destroy()}));o.label=5;case 5:this.currentTransition=undefined;this.animation=undefined;return[2,a]}}))}))};e.prototype.onDidDismiss=function(){return eventMethod(this.el,"ionModalDidDismiss")};e.prototype.onWillDismiss=function(){return eventMethod(this.el,"ionModalWillDismiss")};e.prototype.render=function(){var e;var t=this;var r=this,a=r.handle,i=r.isSheetModal,o=r.presentingElement,n=r.htmlAttributes;var s=a!==false&&i;var d=getIonMode(this);var l=this.modalId;var p=o!==undefined&&d==="ios";return h(Host,Object.assign({"no-router":true,"aria-modal":"true",tabindex:"-1"},n,{style:{zIndex:""+(2e4+this.overlayIndex)},class:Object.assign((e={},e[d]=true,e["modal-default"]=!p&&!i,e["modal-card"]=p,e["modal-sheet"]=i,e["overlay-hidden"]=true,e),getClassMap(this.cssClass)),id:l,onIonBackdropTap:this.onBackdropTap,onIonDismiss:this.onDismiss,onIonModalDidPresent:this.onLifecycle,onIonModalWillPresent:this.onLifecycle,onIonModalWillDismiss:this.onLifecycle,onIonModalDidDismiss:this.onLifecycle}),h("ion-backdrop",{ref:function(e){return t.backdropEl=e},visible:this.showBackdrop,tappable:this.backdropDismiss,part:"backdrop"}),d==="ios"&&h("div",{class:"modal-shadow"}),h("div",{role:"dialog",class:"modal-wrapper ion-overlay-wrapper",part:"content",ref:function(e){return t.wrapperEl=e}},s&&h("div",{class:"modal-handle",part:"handle"}),h("slot",null)))};Object.defineProperty(e.prototype,"el",{get:function(){return getElement(this)},enumerable:false,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{isOpen:["onIsOpenChange"],trigger:["onTriggerChange"],swipeToClose:["swipeToCloseChanged"]}},enumerable:false,configurable:true});return e}();var LIFECYCLE_MAP={ionModalDidPresent:"ionViewDidEnter",ionModalWillPresent:"ionViewWillEnter",ionModalWillDismiss:"ionViewWillLeave",ionModalDidDismiss:"ionViewDidLeave"};var modalIds=0;Modal.style={ios:modalIosCss,md:modalMdCss};export{Modal as ion_modal};